<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kardan Adam ‚Äì Algoritma ≈ûekil Oyunu</title>
<style>
  :root{
    --bg:#eaf4ff;
    --panel:#f7f9fc;
    --ink:#2a2f3a;
    --muted:#7a8799;
    --brand:#6c5dd3;
    --ok:#2ecc71;
    --warn:#e67e22;
    --err:#ff4d4f;
    --card:#ffffff;
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:linear-gradient(180deg,var(--bg),#dfeeff);
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    color:var(--ink); height:100vh; display:flex;
  }

  /* Sol: ≈ûekil paleti */
  #sidebar{
    width:180px; background:var(--panel); border-right:1px solid #dde6f2;
    padding:14px; display:flex; flex-direction:column; gap:10px;
  }
  .brand{
    display:flex; align-items:center; gap:8px; font-weight:700; letter-spacing:.2px;
    margin-bottom:6px;
  }
  .brand .dot{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 0 6px #eee8ff}
  .sub{font-size:12px;color:var(--muted);margin-bottom:8px}
  .palette{
    display:grid; grid-template-columns:repeat(2,1fr); gap:10px;
  }
  .shape{
    width:70px;height:70px;border-radius:14px;background:var(--card); border:1px solid #e6eef8;
    display:grid; place-items:center; cursor:grab; box-shadow:0 4px 10px rgba(28,41,61,.06);
    transition:transform .12s ease, box-shadow .12s ease;
  }
  .shape:active{transform:scale(.98)}
  .token{position:relative; display:block}
  .token.circle{width:48px;height:48px;border-radius:999px;background:#38a3eb}
  .token.bigcircle{width:56px;height:56px;border-radius:999px;background:#38a3eb}
  .token.dot{width:18px;height:18px;border-radius:999px;background:#f1c40f}
  .token.square{width:54px;height:14px;border-radius:6px;background:#2c3e50}
  .token.triangle{
    width:0;height:0;border-left:26px solid transparent;border-right:26px solid transparent;border-bottom:50px solid #2ecc71;
    transform:translateY(2px)
  }

  /* Orta: Oyun alanƒ± */
  #stageWrap{flex:1; display:flex; flex-direction:column}
  #toolbar{
    display:flex; gap:8px; padding:10px 14px; border-bottom:1px solid #dde6f2; background:var(--panel);
    position:sticky; top:0; z-index:5;
  }
  .btn{
    border:1px solid #e6eef8; background:#fff; padding:8px 12px; border-radius:12px;
    font-size:13px; cursor:pointer; display:flex; align-items:center; gap:8px;
    box-shadow:0 2px 6px rgba(28,41,61,.06);
  }
  .btn:hover{transform:translateY(-1px)}
  .btn.ok{border-color:#d9f4e6}
  .btn.warn{border-color:#ffe7ce}
  .btn.hint{border-color:#e9e4ff}
  #game-area{
    flex:1; display:flex; align-items:center; justify-content:center; padding:14px;
  }
  #target{
    width:520px; height:520px; background:#fff; border:1px solid #e6eef8; border-radius:20px;
    box-shadow:0 12px 28px rgba(28,41,61,.08); position:relative; overflow:hidden;
  }
  /* Izgara */
  #target::before{
    content:""; position:absolute; inset:0; background:
      linear-gradient(#f3f7fd 1px, transparent 1px) 0 0/24px 24px,
      linear-gradient(90deg, #f3f7fd 1px, transparent 1px) 0 0/24px 24px;
    pointer-events:none;
  }
  /* ≈ûeffaf iskelet par√ßalarƒ± (drop b√∂lgeleri) */
  .part{
    position:absolute; opacity:.28; transition:opacity .18s ease, transform .18s ease, box-shadow .18s ease;
    outline:2px dashed transparent; border-radius:10px;
  }
  .part[data-shape="circle"]{border-radius:999px;background:#38a3eb}
  .part[data-shape="dot"]{border-radius:999px;background:#f1c40f}
  .part[data-shape="square"]{background:#2c3e50;border-radius:8px}
  .part[data-shape="triangle"]{background:transparent}
  /* triangle g√∂r√ºn√ºm√º */
  .triSkin{
    position:absolute; inset:0; width:0;height:0; margin:auto;
    border-left:46px solid transparent;border-right:46px solid transparent;border-bottom:86px solid #2ecc71;
    transform:translateY(8px); opacity:.28; pointer-events:none;
  }
  .part.validHover{outline:2px dashed var(--brand); box-shadow:0 0 0 6px rgba(108,93,211,.08)}
  .part.filled{opacity:1; outline:none; box-shadow:none}
  .shake{animation:shake .3s}
  @keyframes shake{
    10%{transform:translateX(-5px)} 20%{transform:translateX(5px)} 30%{transform:translateX(-4px)}
    40%{transform:translateX(4px)} 50%{transform:translateX(-2px)} 60%{transform:translateX(2px)}
    100%{transform:translateX(0)}
  }
  .pulse{animation:pulse 1.4s infinite}
  @keyframes pulse{
    0%{box-shadow:0 0 0 0 rgba(108,93,211,.24)} 70%{box-shadow:0 0 0 12px rgba(108,93,211,0)} 100%{box-shadow:0 0 0 0 rgba(108,93,211,0)}
  }

  /* Saƒü: G√∂rev paneli */
  #task{
    width:260px; background:var(--panel); border-left:1px solid #dde6f2; padding:14px;
    display:flex; flex-direction:column; gap:10px;
  }
  .goal{
    background:#fff; border:1px solid #e6eef8; border-radius:16px; padding:10px;
    box-shadow:0 6px 16px rgba(28,41,61,.07); display:grid; place-items:center;
  }
  .goal img{width:180px; opacity:.35}
  .progress{
    height:10px; border-radius:999px; background:#edf2ff; overflow:hidden; border:1px solid #e6e8ff;
  }
  .bar{height:100%; width:0%; background:linear-gradient(90deg,var(--brand),#9b8eff)}
  .steps{display:flex; gap:6px; flex-wrap:wrap; font-size:12px; color:var(--muted)}
  .tag{background:#fff;border:1px solid #e6eef8;border-radius:999px; padding:4px 8px}
  .msg{font-weight:700}
  .msg.ok{color:var(--ok)} .msg.err{color:var(--err)} .msg.warn{color:var(--warn)}

  /* Yerle≈üimler ‚Äì kardan adam par√ßalarƒ± */
  /* Sƒ±ra: 1-alt g√∂vde, 2-orta, 3-kafa, 4-burun, 5-≈üapka */
  .p1{left:180px; top:320px; width:160px; height:160px;}
  .p2{left:200px; top:240px; width:120px; height:120px;}
  .p3{left:215px; top:180px; width:90px; height:90px;}
  .p4{left:252px; top:210px; width:22px; height:22px;} /* burun/dot */
  .p5{left:220px; top:150px; width:150px; height:24px;} /* ≈üapka/square */

  /* Yerle≈ütirilen ger√ßek par√ßa g√∂rselle≈ütirmesi */
  .lock{
    position:absolute; pointer-events:none; transition:transform .2s ease, opacity .2s ease;
    will-change:transform,opacity;
  }
  .pop{animation:pop .22s ease}
  @keyframes pop{0%{transform:scale(.6);opacity:.2}100%{transform:scale(1);opacity:1}}

  /* K√º√ß√ºk ekran uyumu */
  @media (max-width: 1100px){
    #target{width:420px;height:420px}
    .p1{left:145px; top:265px; width:140px; height:140px;}
    .p2{left:162px; top:200px; width:105px; height:105px;}
    .p3{left:175px; top:150px; width:80px; height:80px;}
    .p4{left:206px; top:173px; width:20px; height:20px;}
    .p5{left:176px; top:120px; width:130px; height:22px;}
  }
</style>
</head>
<body>

  <!-- SOL: ≈ûekil Paleti -->
  <aside id="sidebar">
    <div class="brand"><span class="dot"></span>≈ûekil Paleti</div>
    <div class="sub">Doƒüru sƒ±rayla s√ºr√ºkle ve bƒ±rak</div>
    <div class="palette" id="palette">
      <div class="shape" data-shape="circle" draggable="true" aria-label="B√ºy√ºk Daire">
        <span class="token bigcircle"></span>
      </div>
      <div class="shape" data-shape="circle" draggable="true" aria-label="Daire">
        <span class="token circle"></span>
      </div>
      <div class="shape" data-shape="circle" draggable="true" aria-label="Daire">
        <span class="token circle"></span>
      </div>
      <div class="shape" data-shape="dot" draggable="true" aria-label="Burun (Nokta)">
        <span class="token dot"></span>
      </div>
      <div class="shape" data-shape="square" draggable="true" aria-label="≈ûapka (√áubuk)">
        <span class="token square"></span>
      </div>
      <!-- dikkat daƒüƒ±tƒ±cƒ±lar -->
      <div class="shape" data-shape="triangle" draggable="true" aria-label="√ú√ßgen">
        <span class="token triangle"></span>
      </div>
      <div class="shape" data-shape="dot" draggable="true" aria-label="Nokta">
        <span class="token dot"></span>
      </div>
    </div>
  </aside>

  <!-- ORTA: Oyun Alanƒ± -->
  <main id="stageWrap">
    <div id="toolbar">
      <button class="btn warn" id="undoBtn">‚Ü©Ô∏è Geri Al</button>
      <button class="btn" id="resetBtn">üóëÔ∏è Ba≈ütan Ba≈üla</button>
      <button class="btn hint" id="hintBtn">üí° ƒ∞pucu</button>
      <div style="margin-left:auto; color:var(--muted); display:flex; align-items:center; gap:8px">
        <span>Adƒ±m Sƒ±rasƒ±:</span>
        <span class="tag">1 Alt</span><span class="tag">2 Orta</span><span class="tag">3 Kafa</span><span class="tag">4 Burun</span><span class="tag">5 ≈ûapka</span>
      </div>
    </div>

    <section id="game-area" aria-label="Kardan Adam √áalƒ±≈üma Alanƒ±">
      <div id="target" aria-live="polite">
        <!-- ≈ûeffaf iskelet / drop b√∂lgeleri -->
        <div class="part p1" data-order="1" data-shape="circle" title="1. Alt G√∂vde"></div>
        <div class="part p2" data-order="2" data-shape="circle" title="2. Orta G√∂vde"></div>
        <div class="part p3" data-order="3" data-shape="circle" title="3. Kafa"></div>
        <div class="part p4" data-order="4" data-shape="dot"    title="4. Burun"></div>
        <div class="part p5" data-order="5" data-shape="square" title="5. ≈ûapka"></div>
        <!-- √ú√ßgen √∂rnek istersek: <div class="part pX" data-order="N" data-shape="triangle"><span class="triSkin"></span></div> -->
      </div>
    </section>
  </main>

  <!-- SAƒû: G√∂rev Paneli -->
  <aside id="task">
    <div class="brand"><span class="dot"></span>G√∂rev</div>
    <div class="goal">
      <img src="https://i.imgur.com/AtJjScL.png" alt="Kardan Adam (√∂rnek)" />
    </div>
    <div class="steps">
      <span class="tag">Sƒ±ra: Alt ‚Üí Orta ‚Üí Kafa ‚Üí Burun ‚Üí ≈ûapka</span>
    </div>
    <div class="progress" aria-label="ƒ∞lerleme">
      <div class="bar" id="bar"></div>
    </div>
    <div class="msg" id="msg"></div>
  </aside>

<script>
  // --- Durum ---
  let currentStep = 1;
  const parts = Array.from(document.querySelectorAll('.part')).sort((a,b)=>+a.dataset.order - +b.dataset.order);
  const totalSteps = parts.length;
  const target = document.getElementById('target');
  const bar = document.getElementById('bar');
  const msg = document.getElementById('msg');
  const undoStack = []; // {part, nodeCreated:boolean, lockEl:HTMLElement}

  // --- Palet: s√ºr√ºkleme ba≈ülat ---
  document.querySelectorAll('.shape').forEach(el=>{
    el.addEventListener('dragstart', (e)=>{
      // Her s√ºr√ºklemede tip bilgisini bƒ±rak
      e.dataTransfer.setData('shape', el.dataset.shape);
      // Kopya g√∂r√ºnt√º (drag image) ayarƒ± ‚Äî opsiyonel
      // (tarayƒ±cƒ± otomatik g√∂rsel kullanƒ±r; bƒ±rakƒ±yoruz)
    });
  });

  // --- Drop b√∂lgeleri etkile≈üimi ---
  parts.forEach(zone=>{
    zone.addEventListener('dragover', (e)=>{
      e.preventDefault();
      const expectedOrder = +zone.dataset.order;
      const expectedShape = zone.dataset.shape;
      const draggedShape = e.dataTransfer.getData('shape');
      // Sadece doƒüru sƒ±radaki ve doƒüru tipte par√ßada highlight
      if (expectedOrder === currentStep && draggedShape === expectedShape) {
        zone.classList.add('validHover');
      }
    });
    zone.addEventListener('dragleave', ()=> zone.classList.remove('validHover'));

    zone.addEventListener('drop', (e)=>{
      e.preventDefault();
      zone.classList.remove('validHover');
      const draggedShape = e.dataTransfer.getData('shape');
      const expectedShape = zone.dataset.shape;
      const expectedOrder = +zone.dataset.order;

      if (expectedOrder !== currentStep || draggedShape !== expectedShape) {
        // Yanlƒ±≈ü: titret
        zone.classList.add('shake');
        setTimeout(()=>zone.classList.remove('shake'), 320);
        flashMessage("Sƒ±raya ve konuma dikkat et ‚úã", "err");
        return;
      }
      // Doƒüru: kilitle ve belirginle≈ütir
      lockPiece(zone, draggedShape);
      currentStep++;
      updateProgress();
      if (currentStep > totalSteps) {
        flashMessage("üéâ Tebrikler! Kardan adam tamamlandƒ±!", "ok");
        confetti(target);
      } else {
        flashMessage(`‚úÖ Doƒüru! Sƒ±radaki adƒ±m: ${currentStep}`, "ok");
      }
    });
  });

  function lockPiece(zone, type){
    zone.classList.add('filled');
    // G√∂rsel olarak ‚Äúger√ßek‚Äù bir par√ßa olu≈üturup aynƒ± konuma yerle≈ütiriyoruz
    const el = document.createElement('div');
    el.className = 'lock pop';
    el.style.left = zone.style.left;
    el.style.top  = zone.style.top;
    // Boyutlar
    el.style.width  = zone.style.width  || zone.offsetWidth + 'px';
    el.style.height = zone.style.height || zone.offsetHeight + 'px';
    // Stil (ger√ßek renkli par√ßa)
    if (type === 'circle'){ el.style.borderRadius='999px'; el.style.background='#38a3eb'; }
    if (type === 'dot'){ el.style.borderRadius='999px'; el.style.background='#f1c40f'; }
    if (type === 'square'){ el.style.borderRadius='8px'; el.style.background='#2c3e50'; }
    if (type === 'triangle'){
      // √ú√ßgen gerekirse
      el.style.background='transparent';
      el.style.width='0'; el.style.height='0';
      el.style.borderLeft='46px solid transparent';
      el.style.borderRight='46px solid transparent';
      el.style.borderBottom='86px solid #2ecc71';
      el.style.transform='translate(0,8px)';
    }
    target.appendChild(el);
    undoStack.push({part: zone, lockEl: el});
  }

  function updateProgress(){
    const done = Math.min(currentStep-1, totalSteps);
    const pct = (done/totalSteps)*100;
    bar.style.width = pct + '%';
  }

  function flashMessage(text, kind="ok"){
    msg.classList.remove('ok','err','warn');
    msg.classList.add(kind);
    msg.textContent = text;
  }

  // --- Toolbar eylemleri ---
  document.getElementById('resetBtn').addEventListener('click', resetAll);
  document.getElementById('undoBtn').addEventListener('click', undoLast);
  document.getElementById('hintBtn').addEventListener('click', hintNext);

  function resetAll(){
    // Kilit par√ßalarƒ± sil
    undoStack.splice(0).forEach(({lockEl, part})=>{
      if (lockEl && lockEl.parentNode) lockEl.remove();
      part.classList.remove('filled','validHover','pulse','shake');
    });
    currentStep = 1;
    updateProgress();
    flashMessage("Sƒ±fƒ±rlandƒ±. Ba≈ülangƒ±√ßtan dene!", "warn");
  }

  function undoLast(){
    if (!undoStack.length) return;
    const last = undoStack.pop();
    if (last.lockEl && last.lockEl.parentNode) last.lockEl.remove();
    last.part.classList.remove('filled');
    currentStep = Math.max(1, currentStep-1);
    updateProgress();
    flashMessage("Son adƒ±m geri alƒ±ndƒ±.", "warn");
  }

  function hintNext(){
    const next = parts.find(p => +p.dataset.order === currentStep);
    if (!next) return;
    next.classList.add('pulse');
    flashMessage("ƒ∞pucu: Parlayan b√∂lge sƒ±radaki par√ßa.", "warn");
    setTimeout(()=> next.classList.remove('pulse'), 1600);
  }

  // Basit konfeti efekti (CSS/DOM)
  function confetti(container){
    for (let i=0;i<18;i++){
      const c = document.createElement('div');
      c.style.position='absolute';
      c.style.width='8px'; c.style.height='14px';
      c.style.left= (Math.random()*80+10)+'%';
      c.style.top='0%';
      c.style.borderRadius='3px';
      c.style.background = ['#6c5dd3','#38a3eb','#f1c40f','#2ecc71','#ff6b6b'][Math.floor(Math.random()*5)];
      c.style.transform=`rotate(${Math.random()*360}deg)`;
      c.style.opacity='0.95';
      c.style.transition='transform 900ms cubic-bezier(.2,.8,.2,1), top 900ms ease-out, opacity 1100ms';
      container.appendChild(c);
      requestAnimationFrame(()=>{
        c.style.top='90%';
        c.style.transform += ' translateY(360px)';
        c.style.opacity='0';
      });
      setTimeout(()=>c.remove(), 1200);
    }
  }

  // Eri≈üilebilirlik: klavye ipucu (isteƒüe baƒülƒ±)
  document.addEventListener('keydown', (e)=>{
    if (e.key.toLowerCase()==='h'){ hintNext(); }
    if (e.key.toLowerCase()==='r'){ resetAll(); }
    if (e.ctrlKey && e.key.toLowerCase()==='z'){ undoLast(); }
  });
</script>
</body>
</html>
